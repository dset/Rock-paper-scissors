var DSET={};DSET.rockpaperscissors=(function(){function c(){}c.prototype.compareTo=function(d){if(d instanceof c){return 0}else{if(d instanceof a){return 1}else{if(d instanceof b){return -1}}}};function b(){}b.prototype.compareTo=function(d){if(d instanceof b){return 0}else{if(d instanceof c){return 1}else{if(d instanceof a){return -1}}}};function a(){}a.prototype.compareTo=function(d){if(d instanceof a){return 0}else{if(d instanceof b){return 1}else{if(d instanceof c){return -1}}}};return{Rock:c,Paper:b,Scissors:a}}());DSET.util=(function(){function a(){this.observers={}}a.prototype.addObserver=function(c,b){if(typeof b!=="function"){throw new TypeError("observer should be function")}if(!this.observers[c]){this.observers[c]=[]}this.observers[c].push(b)};a.prototype.hasObserver=function(c,b){if(!this.observers[c]){return false}return this.observers[c].indexOf(b)>=0};a.prototype.notify=function(c){if(!this.observers[c]){return}var b=Array.prototype.slice.call(arguments,1);this.observers[c].forEach(function(d){d.apply(this,b)},this)};return{Observable:a}}());(function(){function a(b){this.getRandomMove=function(){var c=b();if(c<1/3){return new DSET.rockpaperscissors.Rock()}else{if(c<2/3){return new DSET.rockpaperscissors.Paper()}else{return new DSET.rockpaperscissors.Scissors()}}}}DSET.rockpaperscissors.Computer=a}());(function(){var d=DSET.rockpaperscissors.Rock;var c=DSET.rockpaperscissors.Paper;var b=DSET.rockpaperscissors.Scissors;function e(){}e.prototype=new DSET.util.Observable();e.prototype.setView=function(f){if(a(f)){throw new SyntaxError("View must contain at least 3 img tags")}f.addEventListener("click",this.handleClick.bind(this));this.view=f};function a(f){return !f||!f.getElementsByTagName||f.getElementsByTagName("img").length<3}e.prototype.handleClick=function(f){var g=this.view.getElementsByTagName("img");if(g[0]===f.target){this.notify("userChoice",new d())}else{if(g[1]===f.target){this.notify("userChoice",new c())}else{if(g[2]===f.target){this.notify("userChoice",new b())}}}};DSET.rockpaperscissors.UserChoiceController=e}());(function(){var e=DSET.rockpaperscissors.Rock;var d=DSET.rockpaperscissors.Paper;var c=DSET.rockpaperscissors.Scissors;function b(f){this.computer=f}b.prototype=new DSET.util.Observable();b.prototype.setView=function(f){if(a(f)){throw new SyntaxError("view has to have at least 3 img tags")}var h=f.getElementsByTagName("img");for(var g=0;g<3;g++){h[g].className="js-invisible"}this.view=f};function a(f){return !f||!f.getElementsByTagName||f.getElementsByTagName("img").length<3}b.prototype.onUserChoice=function(){var h=this.view.getElementsByTagName("img");for(var g=0;g<3;g++){h[g].className="js-invisible"}var f=this.computer.getRandomMove();if(f instanceof e){h[0].className="js-visible"}else{if(f instanceof d){h[1].className="js-visible"}else{if(f instanceof c){h[2].className="js-visible"}}}this.notify("computerChoice",f)};DSET.rockpaperscissors.ComputerChoiceController=b}());(function(){function a(){}a.prototype.setView=function(b){if(!b||b.getElementsByTagName("p").length<3){throw new SyntaxError("view must have at least three p-tags")}var c=b.getElementsByTagName("p");c[0].className="js-invisible";c[1].className="js-invisible";c[2].className="js-invisible";this.view=b};a.prototype.onUserChoice=function(b){this.userMove=b;if(this.computerMove){this.determineWinner();this.userMove=undefined;this.computerMove=undefined}};a.prototype.onComputerChoice=function(b){this.computerMove=b;if(this.userMove){this.determineWinner();this.userMove=undefined;this.computerMove=undefined}};a.prototype.determineWinner=function(){var c=this.view.getElementsByTagName("p");for(var b=0;b<3;b++){c[b].className="js-invisible"}if(this.userMove.compareTo(this.computerMove)<0){c[0].className="js-visible"}else{if(this.userMove.compareTo(this.computerMove)===0){c[1].className="js-visible"}else{if(this.userMove.compareTo(this.computerMove)>0){c[2].className="js-visible"}}}};DSET.rockpaperscissors.ResultController=a}());(function(){var f=document.getElementById("userChoices");var c=new DSET.rockpaperscissors.UserChoiceController();c.setView(f);var a=document.getElementById("computerChoices");var b=new DSET.rockpaperscissors.Computer(Math.random);var g=new DSET.rockpaperscissors.ComputerChoiceController(b);g.setView(a);c.addObserver("userChoice",g.onUserChoice.bind(g));var e=document.getElementById("resultDiv");var d=new DSET.rockpaperscissors.ResultController();d.setView(e);c.addObserver("userChoice",d.onUserChoice.bind(d));g.addObserver("computerChoice",d.onComputerChoice.bind(d))}());