var DSET={};DSET.util=(function(){function a(){this.observers={}}a.prototype.addObserver=function(c,b){if(typeof b!=="function"){throw new TypeError("observer should be function")}if(!this.observers[c]){this.observers[c]=[]}this.observers[c].push(b)};a.prototype.hasObserver=function(c,b){if(!this.observers[c]){return false}return this.observers[c].indexOf(b)>=0};a.prototype.notify=function(c){if(!this.observers[c]){return}var b=Array.prototype.slice.call(arguments,1);this.observers[c].forEach(function(d){d.apply(this,b)},this)};return{Observable:a}}());DSET.rockpaperscissors=(function(){function f(){}f.prototype.compareTo=function(i){if(i instanceof f){return 0}else{if(i instanceof d){return 1}else{if(i instanceof e){return -1}}}};function e(){}e.prototype.compareTo=function(i){if(i instanceof e){return 0}else{if(i instanceof f){return 1}else{if(i instanceof d){return -1}}}};function d(){}d.prototype.compareTo=function(i){if(i instanceof d){return 0}else{if(i instanceof e){return 1}else{if(i instanceof f){return -1}}}};function c(i){this.getRandomMove=function(){var j=i();if(j<1/3){return new f()}else{if(j<2/3){return new e()}else{return new d()}}}}function h(){}h.prototype=new DSET.util.Observable();h.prototype.setView=function(i){if(a(i)){throw new SyntaxError("View must contain at least 3 img tags")}i.addEventListener("click",this.handleClick.bind(this));this.view=i};function a(i){return !i||!i.getElementsByTagName||i.getElementsByTagName("img").length<3}h.prototype.handleClick=function(i){var j=this.view.getElementsByTagName("img");if(j[0]===i.target){this.notify("userChoice",new f())}else{if(j[1]===i.target){this.notify("userChoice",new e())}else{if(j[2]===i.target){this.notify("userChoice",new d())}}}};function b(i){this.computer=i}b.prototype=new DSET.util.Observable();b.prototype.setView=function(j){if(a(j)){throw new SyntaxError("view has to have at least 3 img tags")}var l=j.getElementsByTagName("img");for(var k=0;k<3;k++){l[k].className="js-invisible"}this.view=j};b.prototype.onUserChoice=function(){var l=this.view.getElementsByTagName("img");for(var k=0;k<3;k++){l[k].className="js-invisible"}var j=this.computer.getRandomMove();if(j instanceof f){l[0].className="js-visible"}else{if(j instanceof e){l[1].className="js-visible"}else{if(j instanceof d){l[2].className="js-visible"}}}this.notify("computerChoice",j)};function g(){}g.prototype.setView=function(i){if(!i||i.getElementsByTagName("p").length<3){throw new SyntaxError("view must have at least three p-tags")}var j=i.getElementsByTagName("p");j[0].className="js-invisible";j[1].className="js-invisible";j[2].className="js-invisible";this.view=i};g.prototype.onUserChoice=function(i){this.userMove=i;if(this.computerMove){this.determineWinner();this.userMove=undefined;this.computerMove=undefined}};g.prototype.onComputerChoice=function(i){this.computerMove=i;if(this.userMove){this.determineWinner();this.userMove=undefined;this.computerMove=undefined}};g.prototype.determineWinner=function(){var k=this.view.getElementsByTagName("p");for(var j=0;j<3;j++){k[j].className="js-invisible"}if(this.userMove.compareTo(this.computerMove)<0){k[0].className="js-visible"}else{if(this.userMove.compareTo(this.computerMove)===0){k[1].className="js-visible"}else{if(this.userMove.compareTo(this.computerMove)>0){k[2].className="js-visible"}}}};return{Rock:f,Paper:e,Scissors:d,Computer:c,UserChoiceController:h,ComputerChoiceController:b,ResultController:g}}());(function(){var f=document.getElementById("userChoices");var c=new DSET.rockpaperscissors.UserChoiceController();c.setView(f);var a=document.getElementById("computerChoices");var b=new DSET.rockpaperscissors.Computer(Math.random);var g=new DSET.rockpaperscissors.ComputerChoiceController(b);g.setView(a);c.addObserver("userChoice",g.onUserChoice.bind(g));var e=document.getElementById("resultDiv");var d=new DSET.rockpaperscissors.ResultController();d.setView(e);c.addObserver("userChoice",d.onUserChoice.bind(d));g.addObserver("computerChoice",d.onComputerChoice.bind(d))}());